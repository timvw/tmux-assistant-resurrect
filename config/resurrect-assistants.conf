# tmux-assistant-resurrect — tmux configuration snippet
# Used by `just install` to configure tmux.
# If you installed via TPM, this file is NOT used — the .tmux plugin file
# handles all settings automatically.
#
# Source this from your ~/.tmux.conf:
#   source-file /path/to/tmux-assistant-resurrect/config/resurrect-assistants.conf

# --- TPM (Tmux Plugin Manager) ---
# Install TPM first: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# --- tmux-resurrect settings ---
# Restore pane contents (captures visible text in panes)
set -g @resurrect-capture-pane-contents 'on'

# Do NOT add assistants to @resurrect-processes — that would launch bare
# binaries (without session IDs) and the post-restore hook would then type
# resume commands into the running TUI. The hook handles all resuming.

# Save/restore hooks for assistant session tracking
# NOTE: these paths are set by `just configure-tmux` — adjust if repo location changes
set -g @resurrect-hook-post-save-all 'bash $HOME/src/timvw/tmux-assistant-resurrect/scripts/save-assistant-sessions.sh'
set -g @resurrect-hook-post-restore-all 'bash $HOME/src/timvw/tmux-assistant-resurrect/scripts/restore-assistant-sessions.sh'

# --- tmux-continuum settings ---
# Auto-save every 10 minutes
set -g @continuum-save-interval '5'

# Auto-restore when tmux server starts
set -g @continuum-restore 'on'

# Show continuum status in status bar (optional)
# set -g status-right 'Continuum: #{continuum_status}'

# --- Initialize TPM (must be last line in tmux.conf) ---
# run '~/.tmux/plugins/tpm/tpm'
# NOTE: uncomment the line above in your ~/.tmux.conf AFTER sourcing this file,
# or ensure TPM init runs after this snippet is loaded.
